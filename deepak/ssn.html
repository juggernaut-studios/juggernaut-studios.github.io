<html>
<head>
<title>LinkedIn JavaScript API Hello World</title>

<!-- 1. Include the LinkedIn JavaScript API and define a onLoad callback function -->
<script type="text/javascript" src="http://platform.linkedin.com/in.js">
  api_key: 75u3r8o3r0fklq
  onLoad: onLinkedInLoad
  authorize: true
</script>

<div id="profiles"></div>

<script type="text/javascript">
  // 2. Runs when the JavaScript framework is loaded
  function onLinkedInLoad() {
	console.log(" linkedin loaded");
    //IN.Event.on(IN, "auth", onLinkedInAuth);
  }

  // 2. Runs when the viewer has authenticated
  function onLinkedInLogin() {
    //IN.API.Profile("me").result(displayProfiles);
	console.log(" Login Success!");
	postImage()
  }

  function postImage()
  {
	IN.API.Raw("/people/~/shares")
    .method("POST")
    .body( JSON.stringify( {
        "content": {
          "submitted-url": "http://juggernaut-studios.github.io/",
          "title": "Its testing Posting API",
          "description": "Pure testing so that it can be used",
          "submitted-image-url": "http://www.ka-gold-jewelry.com/images/products-800/merkaba-prana-small/merkaba-prana-small1.jpg"
        },
        "visibility": {
          "code": "anyone"
        },
        "comment": "LMAO!! LOL1"
      })
    )
    .result(function(r) { 
      alert("POST OK");
    })
    .error(function(r) {
      alert("POST FAIL");
    });
  }
  // 2. Runs when the Profile() API call returns successfully
  function displayProfiles(profiles) {
    member = profiles.values[0];
    document.getElementById("profiles").innerHTML = 
      "<p id=\"" + member.id + "\">Hello " +  member.firstName + " " + member.lastName + "</p>";
  }
  
  
  
  postVal = function()
  {
		IN.Event.on(IN, "auth", function() {onLinkedInLogin();});
		
		
				
  }
</script>


<script>
function loadXMLDoc()
{
	//IN.User.authorize();
	
	
	IN.User.Raw("/people/~/shares")
    .method("POST")
    .body( JSON.stringify( {
        "content": {
          "submitted-url": "http://juggernaut-studios.github.io/",
          "title": "Its testing Posting API",
          "description": "Pure testing so that it can be used",
          "submitted-image-url": "http://www.ka-gold-jewelry.com/images/products-800/merkaba-prana-small/merkaba-prana-small1.jpg"
        },
        "visibility": {
          "code": "anyone"
        },
        "comment": "LMAO!! LOL1"
      })
    )
    .result(function(r) { 
      alert("POST OK");
    })
    .error(function(r) {
      alert("POST FAIL");
    });
  }
  
}
</script>
</head>
<body>

<h2>AJAX</h2>
<button type="button" onclick="loadXMLDoc()">Request data</button>
<button type="button" onclick="postVal()">postVal</button>
<div id="myDiv"></div>


</head>
<body>